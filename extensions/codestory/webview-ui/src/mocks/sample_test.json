{"events":[{"eventId":"0b55a49b-b903-4e50-ae83-ea12f5f02dcf","eventType":"initialThinking","eventContext":"ðŸ¤” ...âŒ› on how to help the user","eventInput":"\n    Can you make sure that the embeddings computation does not throw error but returns -1 when the lengths are not equal.\n    ","eventOutput":null,"eventTimestamp":1691370879200,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"numberOfBranchElements":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"8c0ba306-0317-405a-a124-f93a2abe0c33","eventType":"planningOut","eventInput":"\n    Can you make sure that the embeddings computation does not throw error but returns -1 when the lengths are not equal.\n    ","eventOutput":null,"eventContext":"* Implement appropriate error handling mechanism to check the vector lengths before proceeding with the embeddings computation.\n    * Write unit tests to make sure the updated function behaves as expected in different scenarios.","eventTimestamp":1691370888160,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"numberOfBranchElements":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"6e929560-7cf3-4531-abd3-e7da28cf2a97","eventType":"searchForCodeSnippets","eventOutput":null,"eventInput":"* Locate embedding computation function in the repository\n    * Understand the data structure and size relation for vectors used in embedding\n    * Identify other places where same computation is repeated","eventContext":null,"eventTimestamp":1691370888161,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"numberOfBranchElements":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"5c56183f-a471-44e7-a401-b3d6c0bd4779","eventType":"searchResults","eventOutput":null,"eventInput":"* Locate embedding computation function in the repository\n    * Understand the data structure and size relation for vectors used in embedding\n    * Identify other places where same computation is repeated","eventContext":null,"eventTimestamp":1691370888456,"codeSymbolReference":[{"symbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch","symbolKind":4,"symbolStartLine":17,"symbolEndLine":50,"codeSnippet":{"languageId":"typescript","code":""},"extraSymbolHint":"typescript.class","dependencies":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"class EmbeddingsSearch","originalName":"EmbeddingsSearch","originalSymbolName":"EmbeddingsSearch","globalScope":"src.codeGraph.embeddingsSearch"},{"symbolName":"src.storage.indexer.indexRepository","symbolKind":11,"symbolStartLine":152,"symbolEndLine":210,"codeSnippet":{"languageId":"typescript","code":"{\n    // One way to do this would be that we walk along the whole repo and index\n    // it\n    // After which is the repo is already indexed, then we should figure out\n    // how to take care of deletions and moved files, these are the most important\n    // ones\n    // TODO(codestory): We need to only look at the changes later and index them\n    // for now this is fine.\n    let codeSymbolWithEmbeddings: CodeSymbolInformationEmbeddings[] = [];\n    if (!storage.isIndexed) {\n        // logger.info(\"[indexing_start] Starting indexing\");\n        // Start re-indexing right now.\n        projectManagement.directoryToProjectMapping.forEach(async (project, workingDirectory) => {\n            const codeSymbolInformationList = await getCodeSymbolList(project, workingDirectory);\n            const codeSymbolWithEmbeddingsForProject = await generateAndStoreEmbeddings(\n                codeSymbolInformationList,\n                workingDirectory,\n                globalStorageUri\n            );\n            codeSymbolWithEmbeddings.push(...codeSymbolWithEmbeddingsForProject);\n        });\n        storage.lastIndexedRepoHash = await getGitCurrentHash(workingDirectory);\n        storage.isIndexed = true;\n        saveCodeStoryStorageObjectToStorage(globalStorageUri, storage, workingDirectory);\n    } else {\n        // TODO(codestory): Only look at the delta and re-index these files which have changed.\n        const currentHash = await getGitCurrentHash(workingDirectory);\n        if (currentHash !== storage.lastIndexedRepoHash) {\n            // We need to re-index the repo\n            // TODO(codestory): Repeated code here, we need to clean it up\n            projectManagement.directoryToProjectMapping.forEach(async (project, workingDirectory) => {\n                const codeSymbolInformationList = await getCodeSymbolList(project, workingDirectory);\n                const codeSymbolWithEmbeddingsForProject = await generateAndStoreEmbeddings(\n                    codeSymbolInformationList,\n                    workingDirectory,\n                    globalStorageUri\n                );\n                codeSymbolWithEmbeddings.push(...codeSymbolWithEmbeddingsForProject);\n            });\n            storage.lastIndexedRepoHash = await getGitCurrentHash(workingDirectory);\n            storage.isIndexed = true;\n            saveCodeStoryStorageObjectToStorage(globalStorageUri, storage, workingDirectory);\n        } else {\n            // We should load all the code symbols with embeddings from the local storage\n            // and return it\n            const repoName = await getGitRepoName(workingDirectory);\n            codeSymbolWithEmbeddings = await loadCodeSymbolDescriptionFromLocalStorage(\n                globalStorageUri,\n                repoName,\n            );\n        }\n    }\n    return codeSymbolWithEmbeddings;\n}"},"extraSymbolHint":"typescript.arrowFunction","dependencies":[{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.projectManagement","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.parseTypescript.TSMorphProjectManagement.directoryToProjectMapping","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Map.forEach","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.getCodeSymbolList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.getCodeSymbolList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitCurrentHash","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.types.saveCodeStoryStorageObjectToStorage","filePath":"/Users/skcd/scratch/vscode_plugin/src/storage/types.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.storage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitCurrentHash","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.projectManagement","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.parseTypescript.TSMorphProjectManagement.directoryToProjectMapping","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Map.forEach","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.getCodeSymbolList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.getCodeSymbolList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.project","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddingsForProject","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitCurrentHash","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.types.saveCodeStoryStorageObjectToStorage","filePath":"/Users/skcd/scratch/vscode_plugin/src/storage/types.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.storage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitRepoName","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.loadCodeSymbolDescriptionFromLocalStorage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.indexRepository","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.repoName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"indexRepository callback()","originalName":"indexRepository","originalSymbolName":"indexRepository","globalScope":"src.storage.indexer"},{"symbolName":"src.llm.embeddings.openai.generateEmbedding","symbolKind":11,"symbolStartLine":8,"symbolEndLine":15,"codeSnippet":{"languageId":"typescript","code":"{\n    const response = await openai.createEmbedding({\n        model: \"text-embedding-ada-002\",\n        input: prompt,\n    });\n    const [{ embedding }] = response.data.data;\n    return embedding;\n}"},"extraSymbolHint":"typescript.arrowFunction","dependencies":[{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.openai","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","codeSymbolKind":11,"edges":[{"codeSymbolName":"node_modules.openai.dist.api.OpenAIApi.createEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.__object.model","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.__object.input","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.prompt","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/llm/embeddings/openai.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/llm/embeddings/openai.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"generateEmbedding callback()","originalName":"generateEmbedding","originalSymbolName":"generateEmbedding","globalScope":"src.llm.embeddings.openai"},{"symbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","symbolKind":5,"symbolStartLine":24,"symbolEndLine":49,"codeSnippet":{"languageId":"typescript","code":"{\n        console.log(\"Whats the length of all code symbols: \" + this._nodes.length);\n        const userQueryEmbedding = await generateEmbedding(userQuery);\n\n        const nodesWithSimilarity = this._nodes.map((node) => {\n            const similarity = cosineSimilarity(\n                userQueryEmbedding,\n                node.codeSymbolEmbedding,\n            );\n            return {\n                node,\n                similarity,\n            };\n        });\n\n        nodesWithSimilarity.sort((a, b) => {\n            return b.similarity - a.similarity;\n        });\n\n        return nodesWithSimilarity.slice(0, 10).map((nodeWithSimilarity) => {\n            return nodeWithSimilarity.node;\n        });\n        return [];\n    }"},"dependencies":[{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.console","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Console.log","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch._nodes","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.length","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","filePath":"/Users/skcd/scratch/vscode_plugin/src/llm/embeddings/openai.ts"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.userQuery","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch._nodes","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.map","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.similarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.userQueryEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformationEmbeddings.codeSymbolEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.__object.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.__object.similarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.userQueryEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformationEmbeddings.codeSymbolEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.nodesWithSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.sort","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.a","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.b","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.b","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.__object.similarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.a","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.__object.similarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.nodesWithSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.slice","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.map","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.nodeWithSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.nodeWithSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.__object.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.nodesWithSimilarity","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"generateNodesRelevantForUser","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.Array.slice","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"extraSymbolHint":"typescript.classMethod","fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"generateNodesRelevantForUser()","originalName":"generateNodesRelevantForUser","originalSymbolName":"generateNodesRelevantForUser","globalScope":"EmbeddingsSearch"},{"symbolName":"src.storage.indexer.generateAndStoreEmbeddings","symbolKind":11,"symbolStartLine":118,"symbolEndLine":149,"codeSnippet":{"languageId":"typescript","code":"{\n    const codeSymbolWithEmbeddings: CodeSymbolInformationEmbeddings[] = [];\n    for (let index = 0; index < codeSymbolInformationList.length; index++) {\n        const codeSymbol = codeSymbolInformationList[index];\n        const codeContent = codeSymbol.codeSnippet.code;\n        const filePath = codeSymbol.fsFilePath;\n        const scopePart = codeSymbol.globalScope;\n        const relativePath = filePath.replace(workingDirectory, \"\");\n        const contextForEmbedding = generateContextForEmbedding(codeContent, relativePath, scopePart);\n        // We generate the embeddings here\n        const embeddings = await generateEmbedding(contextForEmbedding);\n        codeSymbolWithEmbeddings.push({\n            codeSymbolInformation: codeSymbol,\n            codeSymbolEmbedding: embeddings,\n        });\n        // We store it locally to our local storage\n        await storeCodeSymbolDescriptionToLocalStorage(\n            codeSymbol.symbolName,\n            await getGitRepoName(workingDirectory),\n            globalStorageUri,\n            {\n                codeSymbolInformation: codeSymbol,\n                codeSymbolEmbedding: embeddings,\n            }\n        );\n    }\n    return codeSymbolWithEmbeddings;\n}"},"extraSymbolHint":"typescript.arrowFunction","dependencies":[{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.filePath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.String.replace","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.generateContextForEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeContent","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.relativePath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.scopePart","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.embeddings.openai.generateEmbedding","filePath":"/Users/skcd/scratch/vscode_plugin/src/llm/embeddings/openai.ts"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.contextForEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolWithEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.__object.codeSymbolInformation","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.__object.codeSymbolEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.embeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.storeCodeSymbolDescriptionToLocalStorage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformation.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitRepoName","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.__object.codeSymbolInformation","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.__object.codeSymbolEmbedding","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.embeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.git.helper.getGitRepoName","filePath":"/Users/skcd/scratch/vscode_plugin/src/git/helper.ts"}]},{"codeSymbolName":"src.storage.indexer.generateAndStoreEmbeddings","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.workingDirectory","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"generateAndStoreEmbeddings callback()","originalName":"generateAndStoreEmbeddings","originalSymbolName":"generateAndStoreEmbeddings","globalScope":"src.storage.indexer"},{"symbolName":"src.utilities.types.CodeSymbolInformationEmbeddings","symbolKind":10,"symbolStartLine":69,"symbolEndLine":72,"codeSnippet":{"languageId":"typescript","code":"export interface CodeSymbolInformationEmbeddings {\n    codeSymbolInformation: CodeSymbolInformation,\n    codeSymbolEmbedding: number[],\n}"},"extraSymbolHint":"typescript.interface","dependencies":[],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/utilities/types.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/utilities/types.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"interface CodeSymbolInformationEmbeddings","originalName":"CodeSymbolInformationEmbeddings","originalSymbolName":"CodeSymbolInformationEmbeddings","globalScope":"src.utilities.types"},{"symbolName":"src.extension.activate","symbolKind":11,"symbolStartLine":12,"symbolEndLine":45,"codeSnippet":{"languageId":"typescript","code":"{\n  // Project root here\n  postHogClient.capture({\n    distinctId: env.machineId,\n    event: \"extension_activated\",\n  });\n  let rootPath = workspace.rootPath;\n  if (!rootPath) {\n    rootPath = \"\";\n  }\n  // Get the storage object here\n  const codeStoryStorage = await loadOrSaveToStorage(context.globalStorageUri.fsPath, rootPath);\n  logger.info(codeStoryStorage);\n  logger.info(rootPath);\n  // Ts-morph project management\n  const projectManagement = await getProject(rootPath);\n  // Re-index or keep going as required (we will boost this tomorrow)\n  const symbolWithEmbeddings = await indexRepository(\n    codeStoryStorage,\n    projectManagement,\n    context.globalStorageUri.fsPath,\n    rootPath\n  );\n  const embeddingsIndex = new EmbeddingsSearch(symbolWithEmbeddings);\n\n  // Get the code graph\n  const codeGraph = generateCodeGraph(projectManagement);\n\n  // Create the show chat view command and add to extension context\n  const showChatViewCommand = commands.registerCommand(\"webview.showChatView\", () => {\n    ChatViewPanel.render(context.extensionUri);\n  });\n  context.subscriptions.push(showChatViewCommand);\n}"},"extraSymbolHint":"typescript.function","dependencies":[{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.postHogClient","filePath":"/Users/skcd/scratch/vscode_plugin/src/posthog/client.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.PostHog.capture","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.__object.distinctId","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".env","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/vscode/index.d.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".env.machineId","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.__object.event","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.types.loadOrSaveToStorage","filePath":"/Users/skcd/scratch/vscode_plugin/src/storage/types.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.context","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".ExtensionContext.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".Uri.fsPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.rootPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.logger","filePath":"/Users/skcd/scratch/vscode_plugin/src/logger.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.winston.Logger.info","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.codeStoryStorage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.logger","filePath":"/Users/skcd/scratch/vscode_plugin/src/logger.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.winston.Logger.info","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.rootPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.parseTypescript.getProject","filePath":"/Users/skcd/scratch/vscode_plugin/src/utilities/parseTypescript.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.rootPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.indexRepository","filePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.codeStoryStorage","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.projectManagement","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.context","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".ExtensionContext.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".Uri.fsPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.rootPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.generateCodeGraph","filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/graph.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.projectManagement","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".commands","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/vscode/index.d.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".commands.registerCommand","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.panels.ChatViewPanel.ChatViewPanel","filePath":"/Users/skcd/scratch/vscode_plugin/src/panels/ChatViewPanel.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.panels.ChatViewPanel.ChatViewPanel.render","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.context","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".ExtensionContext.extensionUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.panels.ChatViewPanel.ChatViewPanel","filePath":"/Users/skcd/scratch/vscode_plugin/src/panels/ChatViewPanel.ts"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.panels.ChatViewPanel.ChatViewPanel.render","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.context","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".ExtensionContext.extensionUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.context","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.\"vscode\".ExtensionContext.subscriptions","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"activate","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.extension.showChatViewCommand","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/extension.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/extension.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"activate()","originalName":"activate","originalSymbolName":"activate","globalScope":"src.extension"},{"symbolName":"src.storage.indexer.loadCodeSymbolDescriptionFromLocalStorage","symbolKind":11,"symbolStartLine":76,"symbolEndLine":96,"codeSnippet":{"languageId":"typescript","code":"{\n    const directoryPath = path.join(\n        globalStorageUri,\n        remoteSession,\n        \"code_symbol\",\n        \"descriptions\",\n    );\n    const files = await fs.promises.readdir(directoryPath);\n    const codeSymbolInformationEmbeddingsList: CodeSymbolInformationEmbeddings[] = [];\n    for (let index = 0; index < files.length; index++) {\n        const file = files[index];\n        const filePath = path.join(directoryPath, file);\n        const fileContent = await fs.promises.readFile(filePath);\n        const codeSymbolInformationEmbeddings = JSON.parse(fileContent.toString()) as CodeSymbolInformationEmbeddings;\n        codeSymbolInformationEmbeddingsList.push(codeSymbolInformationEmbeddings);\n    }\n    return codeSymbolInformationEmbeddingsList;\n}"},"extraSymbolHint":"typescript.function","dependencies":[{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"path\"","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/node/path.d.ts"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"path\".join","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.globalStorageUri","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.remoteSession","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\"","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/node/fs.d.ts"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\".promises","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\".promises.readdir","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.directoryPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"path\"","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/node/path.d.ts"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"path\".join","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.directoryPath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.file","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\"","filePath":"/Users/skcd/scratch/vscode_plugin/node_modules/@types/node/fs.d.ts"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\".promises","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.\"fs\".promises.readFile","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.filePath","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.JSON","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.JSON.parse","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.fileContent","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Buffer.toString","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.fileContent","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Buffer.toString","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationEmbeddingsList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.storage.indexer.codeSymbolInformationEmbeddings","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/storage/indexer.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"loadCodeSymbolDescriptionFromLocalStorage()","originalName":"loadCodeSymbolDescriptionFromLocalStorage","originalSymbolName":"loadCodeSymbolDescriptionFromLocalStorage","globalScope":"src.storage.indexer"},{"symbolName":"src.codeGraph.graph.CodeGraph.getNodeByLastName","symbolKind":5,"symbolStartLine":16,"symbolEndLine":51,"codeSnippet":{"languageId":"typescript","code":"{\n        const nodes = this._nodes.filter(\n            (node) => {\n                const symbolName = node.symbolName;\n                const splittedSymbolName = symbolName.split('.').reverse();\n                let accumulator = \"\";\n                for (let index = 0; index < splittedSymbolName.length; index++) {\n                    const element = splittedSymbolName[index];\n                    if (index === 0) {\n                        accumulator = element;\n                        if (symbolName === \"src.codeGraph.embeddingsSearch.cosineSimilarity\") {\n                            console.log(\"What are we searching for\", accumulator, lastName);\n                        }\n                        if (accumulator === lastName) {\n                            return true;\n                        }\n                    } else {\n                        accumulator = `${element}.${accumulator}`;\n                        if (symbolName === \"src.codeGraph.embeddingsSearch.cosineSimilarity\") {\n                            console.log(\"What are we searching for\", accumulator, lastName);\n                        }\n                        if (accumulator === lastName) {\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            },\n        );\n        if (nodes.length === 0) {\n            return null;\n        }\n        return nodes;\n    }"},"dependencies":[{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.CodeGraph._nodes","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Array.filter","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.node","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformation.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.splittedSymbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.String.split","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Array.reverse","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.index","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.index","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.splittedSymbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Array.length","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.index","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.element","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.splittedSymbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.index","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.index","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.element","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.console","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Console.log","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.element","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.console","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Console.log","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.String.split","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Array.reverse","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.String.split","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.console","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Console.log","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.console","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.Console.log","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.accumulator","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"getNodeByLastName","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.graph.lastName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"extraSymbolHint":"typescript.classMethod","fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/graph.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/graph.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"getNodeByLastName()","originalName":"getNodeByLastName","originalSymbolName":"getNodeByLastName","globalScope":"CodeGraph"},{"symbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","symbolKind":11,"symbolStartLine":14,"symbolEndLine":32,"codeSnippet":{"languageId":"typescript","code":"{\n    const alreadySeenSymbols: Set<string> = new Set();\n    const finalCodeSymbolList: CodeSymbolInformation[] = [];\n    for (let index = 0; index < queries.length; index++) {\n        const query = queries[index];\n        const codeSymbols = await embeddingsSearch.generateNodesRelevantForUser(query);\n        for (let index = 0; index < codeSymbols.length; index++) {\n            const codeSymbol = codeSymbols[index];\n            if (!alreadySeenSymbols.has(codeSymbol.codeSymbolInformation.symbolName)) {\n                alreadySeenSymbols.add(codeSymbol.codeSymbolInformation.symbolName);\n                finalCodeSymbolList.push(codeSymbol.codeSymbolInformation);\n            }\n        }\n    }\n    return finalCodeSymbolList;\n}"},"extraSymbolHint":"typescript.arrowFunction","dependencies":[{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.embeddingsSearch","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.query","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.alreadySeenSymbols","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.Set.has","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformationEmbeddings.codeSymbolInformation","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformation.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.alreadySeenSymbols","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.Set.add","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformationEmbeddings.codeSymbolInformation","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformation.symbolName","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.finalCodeSymbolList","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.Array.push","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.llm.recipe.helpers.codeSymbol","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]},{"codeSymbolName":"src.llm.recipe.helpers.generateCodeSymbolsForQueries","codeSymbolKind":11,"edges":[{"codeSymbolName":"src.utilities.types.CodeSymbolInformationEmbeddings.codeSymbolInformation","filePath":"symbol.getDeclarations()[0].getSourceFile().getFilePath()"}]}],"fsFilePath":"/Users/skcd/scratch/vscode_plugin/src/llm/recipe/helpers.ts","originalFilePath":"/Users/skcd/scratch/vscode_plugin/src/llm/recipe/helpers.ts","workingDirectory":"/Users/skcd/scratch/vscode_plugin/","displayName":"generateCodeSymbolsForQueries callback()","originalName":"generateCodeSymbolsForQueries","originalSymbolName":"generateCodeSymbolsForQueries","globalScope":"src.llm.recipe.helpers"}],"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"numberOfBranchElements":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"beeeb060-e58b-4ebd-9482-82e147bc70ae","eventType":"branchElements","eventOutput":null,"eventInput":"About to start branching","eventContext":null,"eventTimestamp":1691370901451,"numberOfBranchElements":2,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":[{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","instructions":"Before the call to `cosineSimilarity`, add a condition to check if the lengths of `userQueryEmbedding` and `node.codeSymbolEmbedding` are equal. If they are not, return `-1` for `similarity`."},{"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","instructions":"Since we added the length checking in the `generateNodesRelevantForUser` function, you can remove the length checking and error throwing in this function."}]},{"eventId":"8967e94a-ca72-4291-b6dd-4c42152eb97c","eventType":"codeSymbolModificationInstruction","eventOutput":null,"eventInput":"Modification Instructions","eventContext":null,"eventTimestamp":1691370901455,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":{"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","instructions":"Before the call to `cosineSimilarity`, add a condition to check if the lengths of `userQueryEmbedding` and `node.codeSymbolEmbedding` are equal. If they are not, return `-1` for `similarity`."},"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":"0","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"a75bb8c5-08fc-4739-9695-b0c580bb4aba","eventType":"codeSymbolModificationEvent","eventInput":"Code symbol is going to be modified","eventOutput":null,"eventContext":null,"eventTimestamp":1691370913629,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":{"codeModification":"Step-by-step thoughts with explanations:\nThought 1 - Adding a check before the cosineSimilarity method call to validate the length of the two vectors. This can prevent unnecessary exceptions and provide better handling for scenarios where the embedding lengths are not the same.\nThought 2 - If the lengths of the vectors are not the same, the similarity value should be set as -1 as per the requirements to denote a discrepancy in the embeddings.\n\nDetailed plan of modifications:\nModification 1 - Before the call to the cosineSimilarity() method, add a condition to check if the lengths of userQueryEmbedding and node.codeSymbolEmbedding are equal.\nModification 2 - If they're not equal, set the similarity value to -1.\n\nLines to change in the file:\nlines 26-40: Introduce condition to check the lengths and modify the assignment of the similarity variable.","codeDiff":"```\n<<<< ORIGINAL\nconst nodesWithSimilarity = this._nodes.map((node) => {\n            const similarity = cosineSimilarity(\n                userQueryEmbedding,\n                node.codeSymbolEmbedding,\n            );\n            return {\n                node,\n                similarity,\n            };\n        });\n====\nconst nodesWithSimilarity = this._nodes.map((node) => {\n            const similarity = (userQueryEmbedding.length === node.codeSymbolEmbedding.length) \n            ? cosineSimilarity(userQueryEmbedding, node.codeSymbolEmbedding)\n            : -1;\n\n            return {\n                node,\n                similarity,\n            };\n        });\n>>>> UPDATED\n```"},"fileSaveEvent":null,"executionEventId":"0","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"0d49febc-67da-4f4b-bcc2-95b6f56d9400","eventType":"saveFile","eventInput":"File is going to be saved","eventOutput":null,"eventContext":null,"eventTimestamp":1691370934978,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":{"filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser"},"executionEventId":"0","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"e5bb7aa6-798a-44f2-bfab-ca5558c4e6e5","eventType":"testExecutionHarness","eventInput":"Test execution is going to be run","eventOutput":null,"eventContext":null,"eventTimestamp":1691370972011,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":{"filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser"},"executionEventId":"0","testExecutionHarness":{"testScript":"\n\ntest('Check that generateNodesRelevantForUser handles non-matching lengths', async () => {\n    // Mock generateEmbedding function\n    generateEmbedding = jest.fn((query) => {\n        if (query === 'userQuery') {\n            return Array(10).fill(0)\n        } else {\n            return Array(20).fill(0)\n        }\n    })\n\n    // Create a nodes array\n    const nodes = [{\n        codeSymbolInformation: null,\n        codeSymbolEmbedding: Array(20).fill(0)\n    }]\n\n    // Initialize EmbeddingsSearch with nodes array\n    const EmbeddingsSearchCheck = new EmbeddingsSearch(nodes)\n  \n    // Call generateNodesRelevantForUser method\n    const result = await EmbeddingsSearchCheck.generateNodesRelevantForUser('userQuery')\n\n    // Check that the similarity is now -1\n    expect(result[0].similarity).toBe(-1)\n});\n  \ntest('Check that generateNodesRelevantForUser still works for matching lengths', async () => {\n    // Mock generateEmbedding function\n    generateEmbedding = jest.fn().mockReturnValue(Array(10).fill(0))\n\n    // Create a nodes array\n    const nodes = [{\n        codeSymbolInformation: null,\n        codeSymbolEmbedding: Array(10).fill(0)\n    }]\n\n    // Initialize EmbeddingsSearch with nodes array\n    const EmbeddingsSearchCheck = new EmbeddingsSearch(nodes)\n  \n    // Call generateNodesRelevantForUser method\n    const result = await EmbeddingsSearchCheck.generateNodesRelevantForUser('userQuery')\n\n    // Check that the similarity is still computed correctly\n    expect(result[0].similarity).toBe(1)\n});\n\n","imports":"\n* import { EmbeddingsSearch } from \"src/codeGraph/embeddingsSearch.ts\"\n* import { CodeSymbolInformationEmbeddings } from \"src/utilities/types.ts\";\n* import { jest } from \"@jest/globals\"\n","planForTestScriptGeneration":"\n* Step 1 - Import required dependencies and functions, these include the EmbeddingsSearch class, and mock required modules.\n* Step 2 - Define an array of any CodeSymbolInformationEmbeddings nodes with mocked codeSymbolEmbedding.\n* Step 3 - Initialize an instance of the EmbeddingsSearch with the nodes array.\n* Step 4 - Test the generateNodesRelevantForUser method with a userQuery and validate the result.\n","thoughtsWithExplanation":"\n* Thought 1 - Given that the function generateNodesRelevantForUser has been updated to handle the case where the lengths of the embeddings are not equal, it will be important to test this case. We can simulate a scenario where one of the codeSymbolEmbedding has a length different from the userQueryEmbedding.\n* Thought 2 - We would need to mock the generateEmbedding function to return two distinct lengths for the user query and the node's symbol.\n* Thought 3 - We would need to check that when a non-matching length is occurring, the similarity value is -1. \n* Thought 4 - Another test to conduct is when the lengths are equal, in this scenario, we expect the function to behave as before and compute similarity between embeddings.\n","codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","testSetupRequired":"\n* Step 1: Mock the generateEmbedding function to return an array of a certain length when called with userQuery, and a different length when called with node.codeSymbolEmbedding.\n* Step 2: Create a array of CodeSymbolInformationEmbeddings nodes with mocked codeSymbolEmbedding.\n","testFileLocation":"/tmp/src/codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser.ts"},"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"9e88ef0f-7934-4109-8619-4e86d1b961df","eventType":"saveFile","eventInput":"File is going to be saved","eventOutput":null,"eventContext":null,"eventTimestamp":1691370985665,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":{"filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser"},"executionEventId":"0","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"620c064e-3d8c-4c21-864a-c8e9a015b5d5","eventType":"executionBranchFinishReason","eventInput":"Terminal event is going to be run","eventOutput":null,"eventContext":null,"eventTimestamp":1691370985670,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.EmbeddingsSearch.generateNodesRelevantForUser","fileSaveEvent":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"executionEventId":"0","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":"Test failure","codeModificationInstructionList":null},{"eventId":"80768d76-db8a-46ce-8e5b-50120a5bfdd1","eventType":"codeSymbolModificationInstruction","eventOutput":null,"eventInput":"Modification Instructions","eventContext":null,"eventTimestamp":1691370985673,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"codeSymbolModificationInstruction":{"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","instructions":"Since we added the length checking in the `generateNodesRelevantForUser` function, you can remove the length checking and error throwing in this function."},"codeModificationContextAndDiff":null,"fileSaveEvent":null,"executionEventId":"1","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"9ed6f747-2bfe-4b12-8f1a-bd43c9e7c4e2","eventType":"codeSymbolModificationEvent","eventInput":"Code symbol is going to be modified","eventOutput":null,"eventContext":null,"eventTimestamp":1691370993466,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":{"codeModification":"Step-by-step thoughts with explanations:\nThought 1 - The instruction asks to remove the part of the code where we throw an error if the vectors are not of the same length. The length check will be included in the `generateNodesRelevantForUser` function.\n\nDetailed plan of modifications:\nModification 1 - Remove the if block that throws an error if the lengths are not the same.\n\nLines to change in the file:\nlines 4-6: Remove these lines as they check the lengths and throw an error.","codeDiff":"```diff\nfunction cosineSimilarity(vecA: number[], vecB: number[]): number {\n-    if (vecA.length !== vecB.length) {\n-        throw new Error(\"Vectors must be of same length\");\n-    }\n    const dotProduct = math.dot(vecA, vecB);\n    const magnitudeA = math.norm(vecA);\n    const magnitudeB = math.norm(vecB);\n\n    return dotProduct / ((magnitudeA as number) * (magnitudeB as number));\n}\n```"},"fileSaveEvent":null,"executionEventId":"1","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"9acdc704-8c32-4e14-b708-318da7398e07","eventType":"saveFile","eventInput":"File is going to be saved","eventOutput":null,"eventContext":null,"eventTimestamp":1691371015973,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"fileSaveEvent":{"filePath":"/Users/skcd/scratch/vscode_plugin/src/codeGraph/embeddingsSearch.ts","codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity"},"executionEventId":"1","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null},{"eventId":"9de700ef-852b-4bf3-a899-e1dabbc02d27","eventType":"executionBranchFinishReason","eventInput":"Terminal event is going to be run","eventOutput":null,"eventContext":null,"eventTimestamp":1691371027954,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":"src.codeGraph.embeddingsSearch.cosineSimilarity","fileSaveEvent":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"executionEventId":"1","testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":"Test Plan generation failure","codeModificationInstructionList":null},{"eventId":"ef5fb2a7-57c6-4281-8f79-e33e077d19bf","eventType":"taskComplete","eventInput":"We finished the task","eventOutput":null,"eventContext":null,"eventTimestamp":1691371027959,"numberOfBranchElements":null,"codeSymbolReference":null,"stdout":null,"stderr":null,"codeSymbolName":null,"fileSaveEvent":null,"codeSymbolModificationInstruction":null,"codeModificationContextAndDiff":null,"executionEventId":null,"testExecutionHarness":null,"exitCode":null,"args":null,"markdownReferences":null,"executionBranchFinishReason":null,"codeModificationInstructionList":null}],"saveDestination":"/tmp/tooling_event_codestory"}